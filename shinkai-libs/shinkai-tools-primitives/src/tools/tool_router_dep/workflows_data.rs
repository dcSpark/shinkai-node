pub static WORKFLOWS_JSON_TESTING: &str = r###"[{"type":"Workflow","content":[{"workflow":{"name":"Extensive_summary","version":"v0.1","steps":[{"name":"Initialize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$PROMPT","value":"Summarize this: "}},{"type":"registeroperation","value":{"register":"$EMBEDDINGS","value":{"name":"process_embeddings_in_job_scope","args":[]}}}]}]},{"name":"Summarize","body":[{"type":"registeroperation","value":{"register":"$RESULT","value":{"name":"multi_inference","args":[{"type":"register","value":"$PROMPT"},{"type":"register","value":"$EMBEDDINGS"}]}}}]}],"raw":"\n            workflow Extensive_summary v0.1 {\n                step Initialize {\n                    $PROMPT = \"Summarize this: \"\n                    $EMBEDDINGS = call process_embeddings_in_job_scope()\n                }\n                step Summarize {\n                    $RESULT = call multi_inference($PROMPT, $EMBEDDINGS)\n                }\n            } @@official.shinkai\n        ","description":"Reviews in depth all the content to generate a summary.","author":"@@official.shinkai","sticky":false},"embedding":{"id":"","vector":[0.6820248961448669,0.5723804831504822,0.056784410029649734,-0.029523666948080063,-0.2254689335823059,-0.053013481199741364,-0.6708416938781738,-0.2624345123767853,-0.033756330609321594,0.4013897180557251,-0.16321982443332672,0.971656858921051,0.2718249261379242,0.07108756899833679,0.2820807695388794,0.14116838574409485,-0.11496889591217041,-0.49301284551620483,-1.0789883136749268,-0.043452829122543335,0.19382520020008087,0.5948700308799744,0.6591302156448364,0.16274362802505493,-0.030279342085123062,-0.1913491189479828,-0.3163045048713684,-0.2898331880569458,-0.7694717645645142,-2.4501161575317383,0.5279894471168518,0.0053562745451927185,-0.5002804398536682,-0.5608552694320679,0.028381161391735077,-0.6834791302680969,0.328404039144516,0.2872193455696106,-0.27112722396850586,-0.2420305460691452,-0.20994114875793457,0.23660853505134583,-0.35357770323753357,0.590043306350708,0.27437782287597656,0.06486925482749939,-0.15818193554878235,-0.2542445659637451,0.3756386339664459,0.38245582580566406,-0.45134201645851135,-0.26646173000335693,-0.21188713610172272,0.5074135065078735,-0.45056354999542236,0.42795759439468384,-0.14764094352722168,-0.299643874168396,0.24885445833206177,0.021038610488176346,0.29774922132492065,0.527859091758728,-4.216637134552002,0.35374659299850464,0.19555260241031647,0.3751485049724579,0.17744454741477966,-0.2610761225223541,-0.172037273645401,0.032772570848464966,0.05567239597439766,0.19824181497097015,-0.13289085030555725,-0.1100323274731636,-0.23126265406608582,-0.34616896510124207,0.3950774073600769,0.35234352946281433,0.1308232843875885,-0.6239751577377319,-0.7391460537910461,0.4362350106239319,-0.0347885936498642,0.09445835649967194,-0.2117754966020584,0.7171225547790527,-0.3040316104888916,-0.3600367605686188,0.37041613459587097,-0.06581398844718933,-0.006318345665931702,-0.21981696784496307,-0.002286979928612709,0.2790469229221344,-0.7975400686264038,0.10219541937112808,0.15441451966762543,0.11658502370119095,0.4612636864185333,3.6136317253112793,0.6766623854637146,-0.28591224551200867,0.7045385241508484,-0.4960375726222992,0.1050494909286499,-0.5604535937309265,-0.25389742851257324,-0.2956107258796692,0.40285223722457886,-0.111656554043293,0.015156731009483337,-0.5351597666740417,-0.030287399888038635,0.3177969753742218,0.21704047918319702,0.7171976566314697,-0.46601396799087524,0.3439251184463501,-0.061566051095724106,0.20522497594356537,-0.6280752420425415,0.130172997713089,0.051850613206624985,0.21620029211044312,-0.2943073809146881,0.1809474229812622,-0.23445376753807068,0.2775576710700989,0.2914619445800781,0.0578656867146492,0.10241352021694183,-0.15168319642543793,-0.7568095326423645,0.092719167470932,-0.0777229368686676,-0.15893718600273132,0.5966013073921204,-0.7341698408126831,0.25946319103240967,-0.9252210259437561,0.09058776497840881,-1.5351767539978027,0.7115793824195862,0.29241278767585754,0.7798487544059753,-0.08018416166305542,-0.13354992866516113,-0.08928925544023514,-0.4238916337490082,-0.5697543025016785,0.06765686720609665,0.77348792552948,-0.04202955216169357,0.06487800180912018,0.5874587893486023,-0.11936471611261368,-0.25156763195991516,0.19140180945396423,-0.5563774108886719,0.31181517243385315,-0.32280847430229187,-0.15203385055065155,0.6281672716140747,0.6141714453697205,0.5077856183052063,-0.20541121065616608,0.334749698638916,-0.22992375493049622,0.3473362326622009,0.13209888339042664,-0.046164438128471375,-0.4251396954059601,0.33730384707450867,0.8212467432022095,0.177277609705925,-0.1610117256641388,-0.07467097789049149,0.2908981442451477,0.2191067337989807,-0.5679166316986084,0.7439255714416504,0.5261525511741638,-0.11653833091259003,-0.3659759759902954,-0.023860540241003036,-0.26393836736679077,0.42201778292655945,-0.21162325143814087,0.6553518176078796,0.7129044532775879,-0.8967499136924744,1.4437609910964966,-0.7139504551887512,-0.4562397301197052,0.1866864711046219,-0.1461351215839386,-0.5919792056083679,-0.022950291633605957,0.10381539165973663,0.28671005368232727,-0.5119964480400085,0.06818243861198425,-0.34842413663864136,-0.2360081672668457,-0.20727667212486267,-0.666267454624176,-0.2698496878147125,0.14760757982730865,-0.1733710914850235,-0.7490845322608948,0.17996001243591309,-0.1494026631116867,0.6294229030609131,0.6854228973388672,0.45075780153274536,0.16544346511363983,0.15525199472904205,0.40028688311576843,0.6559727787971497,0.5462879538536072,0.6049190759658813,-0.16969510912895203,-0.5258905291557312,-0.7370105385780334,-0.5058722496032715,0.05097363144159317,-0.4502354860305786,-0.16756923496723175,-0.3616001605987549,-0.07482671737670898,0.5364893674850464,0.3961637616157532,0.6380713582038879,0.7769057154655457,0.45226916670799255,0.12783251702785492,-0.06475261598825455,0.5124138593673706,0.2543259561061859,-0.3266713619232178,0.6652782559394836,-0.10381640493869781,-0.2858583927154541,0.369432270526886,0.4281133711338043,-0.397693008184433,-0.4147809147834778,-0.007397249341011047,-0.16696804761886597,1.8266067504882812,0.09511159360408783,-0.33791670203208923,0.20951442420482635,0.5353755950927734,0.4132263660430908,0.07172563672065735,-1.3672807216644287,0.033725690096616745,-0.6914818286895752,0.4152260720729828,-0.29042062163352966,0.2820392847061157,-0.12484639883041382,0.12444232404232025,-0.2538592219352722,-0.1376664787530899,-0.376803457736969,-0.21342863142490387,-0.3275066018104553,-0.1573990434408188,0.07955310493707657,0.7591940760612488,0.06325787305831909,-0.1243286207318306,-0.06205055117607117,0.27926522493362427,0.1881060153245926,-0.07187489420175552,-0.43998342752456665,-0.04985599219799042,0.35954052209854126,0.07155530899763107,0.37024304270744324,0.25004273653030396,-0.5525103211402893,-0.2558727264404297,-0.36321941018104553,0.04473167657852173,-0.09463290125131607,-0.01605386659502983,-0.21422991156578064,-0.40423282980918884,-0.07233521342277527,0.24171797931194305,1.5734977722167969,0.2532348036766052,0.3514263331890106,0.5783570408821106,0.38809657096862793,0.18779775500297546,-0.7362217903137207,0.018929127603769302,-0.2433643937110901,-0.1767692118883133,-0.6034640073776245,-0.2618042230606079,0.23901714384555817,0.25006982684135437,-0.3671899735927582,0.56818026304245,-0.45649564266204834,-0.5177562832832336,0.21355649828910828,0.04084805026650429,0.36265265941619873,-0.4912548065185547,0.3579895794391632,-0.06822404265403748,0.23526312410831451,-2.4479732513427734,-0.409572571516037,0.33847421407699585,0.39877307415008545,-0.31740933656692505,-0.13011762499809265,1.0355134010314941,-0.2030523419380188,0.004002278670668602,-0.17361848056316376,1.0097349882125854,0.3712850511074066,0.04738866910338402,-0.38382434844970703,-0.22995835542678833,0.10955353826284409,-0.5831428170204163,0.5505454540252686,-0.251912921667099,-0.6052247285842896,-0.11847558617591858,0.39012327790260315,1.722125768661499,0.4369223117828369,0.4068147540092468,-0.08888967335224152,0.16951988637447357,-0.7578551769256592,-1.5347665548324585,-0.09822624921798706,-0.1749330759048462,-0.40222880244255066,0.40935447812080383,-0.014797728508710861,-0.25942203402519226,0.7363397479057312,0.8023666143417358,0.1866847723722458,1.0114266872406006,-0.37116944789886475,1.44536292552948,-0.37696170806884766,-0.06581003218889236,0.011476762592792511,0.43547624349594116,0.33689627051353455,0.4570700526237488,-0.09152284264564514,-0.7278273105621338,-0.19184312224388123,-0.024527274072170258,0.5096248984336853,-0.4112659990787506,0.585030198097229,0.6007319092750549,0.13742738962173462,-0.0392843633890152,0.18517468869686127,0.4498704671859741,0.053321029990911484,0.055953219532966614,-0.3754947781562805,-0.2632603943347931,-0.8821566700935364,-0.5415434241294861]}},true]},{"type":"Workflow","content":[{"workflow":{"name":"Hyde_inference","version":"v0.1","steps":[{"name":"Initialize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$PROMPT","value":"write a passage to answer the question: "}},{"type":"registeroperation","value":{"register":"$HYDE_PROMPT","value":{"name":"concat","args":[{"type":"register","value":"$PROMPT"},{"type":"register","value":"$INPUT"}]}}},{"type":"registeroperation","value":{"register":"$HYDE_PASSAGE","value":{"name":"inference_no_ws","args":[{"type":"register","value":"$HYDE_PROMPT"}]}}},{"type":"registeroperation","value":{"register":"$HYDE_INPUT","value":{"name":"concat","args":[{"type":"register","value":"$INPUT"},{"type":"string","value":". "},{"type":"register","value":"$HYDE_PASSAGE"}]}}},{"type":"registeroperation","value":{"register":"$EMBEDDINGS","value":{"name":"search_embeddings_in_job_scope","args":[{"type":"register","value":"$HYDE_INPUT"}]}}}]}]},{"name":"Summarize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$CONNECTOR","value":"\\nLeverage the following information to answer the previous query: --- start ---"}},{"type":"registeroperation","value":{"register":"$NEW_INPUT","value":{"name":"concat","args":[{"type":"register","value":"$INPUT"},{"type":"register","value":"$CONNECTOR"},{"type":"register","value":"$EMBEDDINGS"}]}}},{"type":"registeroperation","value":{"register":"$RESULT","value":{"name":"inference","args":[{"type":"register","value":"$NEW_INPUT"}]}}}]}]}],"raw":"\n            workflow Hyde_inference v0.1 {\n                step Initialize {\n                    $PROMPT = \"write a passage to answer the question: \"\n                    $HYDE_PROMPT = call concat($PROMPT, $INPUT)\n                    $HYDE_PASSAGE = call inference_no_ws($HYDE_PROMPT)\n                    $HYDE_INPUT = call concat($INPUT, \". \", $HYDE_PASSAGE )\n                    $EMBEDDINGS = call search_embeddings_in_job_scope($HYDE_INPUT)\n                }\n                step Summarize {\n                    $CONNECTOR = \"\\nLeverage the following information to answer the previous query: --- start ---\"\n                    $NEW_INPUT = call concat($INPUT, $CONNECTOR, $EMBEDDINGS) \n                    $RESULT = call inference($NEW_INPUT)\n                }\n            } @@official.shinkai\n        ","description":"Generates a passage to answer a question and uses embeddings to refine the answer.","author":"@@official.shinkai","sticky":false},"embedding":{"id":"","vector":[-0.04964948445558548,0.07351528108119965,-0.0037448257207870483,-0.5989986658096313,-0.2695397734642029,0.0556429848074913,-0.8189688920974731,0.17371350526809692,-0.042529553174972534,-0.278947651386261,-0.1592383086681366,0.7632817625999451,-0.15512093901634216,0.5815573930740356,0.40833333134651184,0.08403884619474411,0.10889555513858795,-0.09859824180603027,-1.4305481910705566,-0.36282309889793396,0.26563403010368347,0.5795038938522339,0.6247695684432983,0.09672331809997559,0.2193397581577301,-0.3369952440261841,0.45206624269485474,-0.20352067053318024,-0.8568096160888672,-1.5192517042160034,0.45000338554382324,0.1857410967350006,-0.5474480986595154,-0.6226603984832764,-0.3259250521659851,-0.8049982786178589,0.41149431467056274,-0.33869048953056335,-0.40478962659835815,0.14186139404773712,0.08049512654542923,0.12524786591529846,0.05503413826227188,0.5369344353675842,0.22099512815475464,-0.22166168689727783,0.49372294545173645,0.14834408462047577,0.7515535950660706,0.23170407116413116,-0.38584038615226746,-0.6664334535598755,0.08026009798049927,0.05644957721233368,-0.47618070244789124,-0.07221367955207825,-0.013390932232141495,-0.7227036356925964,0.2766876816749573,-0.2050083577632904,0.0018085697665810585,0.36839884519577026,-4.047801494598389,0.25997495651245117,0.6095144748687744,0.29139724373817444,0.1967528611421585,0.33130836486816406,0.10284334421157837,0.6389473080635071,0.3290032148361206,0.469316303730011,-0.6486641764640808,0.9727193713188171,0.1883121132850647,-0.33047881722450256,-0.36619096994400024,0.22055767476558685,0.3932532072067261,-0.5142701864242554,-0.008600234985351562,0.1599426567554474,-0.09545424580574036,0.23433077335357666,-0.042303428053855896,0.7357178926467896,-0.32235464453697205,0.08163000643253326,0.14104235172271729,-0.11884527653455734,-0.03371256962418556,0.0557616725564003,0.3496687710285187,-0.03216787800192833,-0.003476671874523163,0.3798062205314636,0.03774901106953621,0.20039451122283936,-0.3984847366809845,3.36946439743042,-0.13239504396915436,0.001673419028520584,0.7380388379096985,-0.30677103996276855,0.9782622456550598,-0.19148962199687958,-0.3291283845901489,-0.27219173312187195,0.11630738526582718,-0.3731819987297058,0.2829224765300751,-0.5195115208625793,-0.707719087600708,0.13076543807983398,0.09487534314393997,0.3715026080608368,-0.21381931006908417,0.06631460785865784,0.1631127893924713,0.6596425771713257,-0.34905654191970825,0.4622417092323303,-0.2369920015335083,-0.4202103316783905,-0.5958117246627808,-0.0054769366979599,0.05269158259034157,0.3168359696865082,-0.42596322298049927,-0.2948320209980011,0.19625362753868103,0.3843995928764343,-0.7386986017227173,0.29027774930000305,0.38638198375701904,0.398516982793808,0.5393836498260498,-0.7760148644447327,0.026768285781145096,-0.6783398985862732,0.3489813208580017,-1.9833325147628784,0.42915868759155273,-0.3807029724121094,0.7297704219818115,-0.3749578893184662,-0.988932728767395,-0.049560628831386566,-0.748236894607544,-0.39161738753318787,-0.07422567903995514,0.7568775415420532,-0.42796590924263,-0.6895531415939331,0.7455142736434937,0.3727438449859619,-0.302215039730072,-0.2940479516983032,-0.39270395040512085,0.48044177889823914,-0.45199188590049744,0.012708820402622223,-0.014463722705841064,0.38177770376205444,0.41518479585647583,-0.26775816082954407,0.0609671026468277,0.259851336479187,0.5660082101821899,0.28002557158470154,0.2567088007926941,0.08408413827419281,-0.17901833355426788,0.6893192529678345,-0.18076415359973907,-0.1638849675655365,0.7592079639434814,-0.2850896716117859,0.09555481374263763,-0.34255003929138184,0.21607792377471924,0.6083880066871643,-0.27518394589424133,-0.2888985574245453,0.4869835376739502,0.24507123231887817,-0.04523368924856186,0.08955748379230499,0.8814894556999207,0.7514408826828003,-0.7933105826377869,1.4745051860809326,-0.8296284675598145,0.20127254724502563,-0.17663174867630005,0.10280756652355194,0.7590713500976562,0.6627715826034546,0.011114057153463364,-0.21741513907909393,-0.2958572506904602,-0.07200832664966583,-0.028994381427764893,-0.11766113340854645,-0.29194989800453186,-0.8990501165390015,0.22843225300312042,0.3628116250038147,-0.7341636419296265,-0.3731664717197418,-0.16071830689907074,-0.0289015993475914,0.7402246594429016,0.38305380940437317,0.8563412427902222,0.43994849920272827,0.30292415618896484,-0.22889143228530884,0.16537168622016907,0.7458362579345703,0.012104399502277374,-0.15416470170021057,-0.14556102454662323,-0.748606264591217,-0.5879684686660767,0.3174847364425659,-0.35950881242752075,-0.18004687130451202,-0.31736502051353455,-0.17857733368873596,0.23575669527053833,0.9159373044967651,0.2646183967590332,1.1622544527053833,0.6009469628334045,-0.020364172756671906,0.005769722163677216,0.3249523639678955,0.10982750356197357,-0.18247875571250916,-0.018897704780101776,-0.3283432722091675,0.06723657250404358,-0.18632438778877258,0.016186058521270752,-0.299119770526886,0.27416902780532837,-0.4262268543243408,-0.17139290273189545,1.6794452667236328,0.958503246307373,0.46273133158683777,0.3776611387729645,0.4485767185688019,0.4364531934261322,0.14672908186912537,-1.850408911705017,0.0067354487255215645,-0.7456330060958862,0.5802070498466492,0.3341884911060333,-0.7816597819328308,0.8321707248687744,-0.13638745248317719,-0.02185065858066082,-0.4651019871234894,-0.46033725142478943,-0.7211554050445557,-0.36014968156814575,-0.14086481928825378,-0.5944161415100098,0.8056583404541016,-0.7071620225906372,0.3785657584667206,-0.332245409488678,-0.09814120084047318,0.4233565926551819,0.015407413244247437,-0.33447521924972534,-0.4071231186389923,-0.067552350461483,-0.013831926509737968,0.16377918422222137,0.4718702435493469,-0.27083900570869446,-0.020545989274978638,-0.7419271469116211,-0.41673678159713745,-0.10136746615171432,0.2697226405143738,-0.28535905480384827,-0.3748951554298401,-0.7390844821929932,0.034545667469501495,1.644720435142517,-0.009804271161556244,-0.3737269937992096,0.5042737722396851,0.20176424086093903,-0.45157724618911743,-0.029246389865875244,-0.25737810134887695,-0.16420505940914154,0.39507946372032166,-0.6092503666877747,-0.547132134437561,0.49879688024520874,0.050793204456567764,-0.42933282256126404,-0.6348257064819336,-0.5210633873939514,-0.01414722204208374,0.241664320230484,0.07189908623695374,0.6878603100776672,-0.44729337096214294,0.6146893501281738,0.3114408254623413,0.09885749220848083,-2.39998459815979,0.22510097920894623,0.08821532130241394,0.02281942591071129,-0.16851471364498138,-0.39948421716690063,0.4781944751739502,-0.1106119155883789,0.37788909673690796,-0.5341840386390686,1.6657711267471313,0.23619230091571808,-0.16936853528022766,-0.34403157234191895,-0.05048051103949547,0.5156921148300171,-0.5097588300704956,-0.1076057031750679,0.16615211963653564,-0.41826316714286804,-0.09777717292308807,0.4317220151424408,1.4926064014434814,0.4437429904937744,0.6409068703651428,-0.2857368588447571,0.4252455234527588,-0.4507920742034912,-1.395687222480774,0.32343316078186035,-0.14300259947776794,0.17345699667930603,0.6882900595664978,-0.031068190932273865,-0.014234764501452446,0.2588723599910736,0.6380057334899902,-0.10916788876056671,0.21145275235176086,0.41304823756217957,1.875705361366272,0.30104920268058777,-0.14842073619365692,-0.4808446764945984,-0.3084228038787842,-0.2934291660785675,0.12193095684051514,0.18131327629089355,-0.632544219493866,0.30189579725265503,0.13330793380737305,0.1023193746805191,-0.14311614632606506,0.4220004975795746,0.20342287421226501,0.7711853981018066,0.04235168173909187,-0.061884328722953796,1.1321145296096802,-0.16180944442749023,0.008948512375354767,-0.0014485716819763184,-0.1739363670349121,-0.3506462275981903,-0.4292738437652588]}},true]},{"type":"Workflow","content":[{"workflow":{"name":"Answer_with_citations","version":"v0.1","steps":[{"name":"Initialize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$DSL","value":"\n        class Citation {\n            citation_id int\n            document_reference string @description(\\\"The name of the document and the page number that supports the answer e.g., FILENAME: Page [PAGE NUMBER]. This is a reference. You must mention it NO MATTER WHAT.\\\")\n            relevantTextFromDocument string @alias(\\\"relevantSentenceFromDocument\\\") @description(\\\"The relevant text from the document that supports the answer. This is part of the citation. You must quote it EXACTLY as it appears in the document with any special characters it contains. You may cite a part of the sentence. The text should be contiguous and not broken up. You may NOT summarize or skip sentences. If you need to skip a sentence, start a new citation instead.\\\")\n        }\n\n        class Answer {\n            answersInText Citation[] @alias(\\\"relevantSentencesFromText\\\")\n            answer AnswerWithCitations @description(\\\"An answer to the user's question that MUST cite sources from the relevantSentencesFromText. Like [0]. If multiple citations are needed, write them like [0][1][2].\\\")\n        }\n\n        class AnswerWithCitations {\n            brief_introduction Paragraph @description(\\\"3-4 long sentences. Must use the citations in the text.\\\")\n            extensive_body Paragraph[] @description(\\\"At least 3-6 long sentences. The more the better. Must use the citations in the text.\\\")\n            conclusion Paragraph[] @description(\\\"1-3 long sentences. Must use the citations in the text.\\\")\n        }\n\n        class Paragraph {\n            sentences string[]\n        }\n\n        class Document {\n            file string\n            text string\n            reference string\n        }\n        class Context {\n            documents Document[]\n            question string\n        }\n\n        function AnswerQuestion(context: Context) -> Answer {\n            client ShinkaiProvider\n\n            prompt #\\\"\n                Out of the given content, do your best to answer the question.\n\n                CONTEXT:\n                {% for document in context.documents %}\n                ----\n                DOCUMENT NAME: {{  document.file }}\n                PARTIAL TEXT: {{ document.text }}\n                DOCUMENT REFERENCE: {{ document.reference }}\n                ----\n                {% endfor %}\n                \n                {{ ctx.output_format }}\n\n                {{ _.role(\\\"user\\\") }}\n\n                QUESTION: {{ context.question }}. Citing the references no matter what e.g., [0]. If multiple citations are needed, write them like [0][1][2].\n\n                ANSWER:\n            \\\"#\n        }\n        "}},{"type":"registeroperation","value":{"register":"$PARAM","value":"context"}},{"type":"registeroperation","value":{"register":"$FUNCTION","value":"AnswerQuestion"}},{"type":"registeroperation","value":{"register":"$RESULT","value":{"name":"baml_inference","args":[{"type":"register","value":"$INPUT"},{"type":"string","value":""},{"type":"string","value":""},{"type":"register","value":"$DSL"},{"type":"register","value":"$FUNCTION"},{"type":"register","value":"$PARAM"}]}}}]}]}],"raw":"\n            workflow Answer_with_citations v0.1 {\n                step Initialize {\n                    $DSL = \"\n        class Citation {\n            citation_id int\n            document_reference string @description(\\\"The name of the document and the page number that supports the answer e.g., FILENAME: Page [PAGE NUMBER]. This is a reference. You must mention it NO MATTER WHAT.\\\")\n            relevantTextFromDocument string @alias(\\\"relevantSentenceFromDocument\\\") @description(\\\"The relevant text from the document that supports the answer. This is part of the citation. You must quote it EXACTLY as it appears in the document with any special characters it contains. You may cite a part of the sentence. The text should be contiguous and not broken up. You may NOT summarize or skip sentences. If you need to skip a sentence, start a new citation instead.\\\")\n        }\n\n        class Answer {\n            answersInText Citation[] @alias(\\\"relevantSentencesFromText\\\")\n            answer AnswerWithCitations @description(\\\"An answer to the user's question that MUST cite sources from the relevantSentencesFromText. Like [0]. If multiple citations are needed, write them like [0][1][2].\\\")\n        }\n\n        class AnswerWithCitations {\n            brief_introduction Paragraph @description(\\\"3-4 long sentences. Must use the citations in the text.\\\")\n            extensive_body Paragraph[] @description(\\\"At least 3-6 long sentences. The more the better. Must use the citations in the text.\\\")\n            conclusion Paragraph[] @description(\\\"1-3 long sentences. Must use the citations in the text.\\\")\n        }\n\n        class Paragraph {\n            sentences string[]\n        }\n\n        class Document {\n            file string\n            text string\n            reference string\n        }\n        class Context {\n            documents Document[]\n            question string\n        }\n\n        function AnswerQuestion(context: Context) -> Answer {\n            client ShinkaiProvider\n\n            prompt #\\\"\n                Out of the given content, do your best to answer the question.\n\n                CONTEXT:\n                {% for document in context.documents %}\n                ----\n                DOCUMENT NAME: {{  document.file }}\n                PARTIAL TEXT: {{ document.text }}\n                DOCUMENT REFERENCE: {{ document.reference }}\n                ----\n                {% endfor %}\n                \n                {{ ctx.output_format }}\n\n                {{ _.role(\\\"user\\\") }}\n\n                QUESTION: {{ context.question }}. Citing the references no matter what e.g., [0]. If multiple citations are needed, write them like [0][1][2].\n\n                ANSWER:\n            \\\"#\n        }\n        \"\n                    $PARAM = \"context\"\n                    $FUNCTION = \"AnswerQuestion\"\n                    $RESULT = call baml_inference($INPUT, \"\", \"\", $DSL, $FUNCTION, $PARAM)\n                }\n            } @@localhost.arb-sep-shinkai\n        ","description":"Generates an answer to a question with citations from the provided content using BAML. The answer includes quotes from the content as citations.","author":"@@localhost.arb-sep-shinkai","sticky":false},"embedding":{"id":"","vector":[0.3800816833972931,0.17640133202075958,-0.3163798451423645,-0.11634901911020279,-0.3349595069885254,-0.4466348886489868,-1.4688464403152466,0.259466290473938,-0.17714954912662506,-0.13371698558330536,-0.15901461243629456,0.43170809745788574,0.6013452410697937,-0.14516477286815643,0.6140050292015076,0.359850138425827,-0.038955509662628174,-0.4289429783821106,-0.960910439491272,0.12450194358825684,0.4667840301990509,0.3128971457481384,0.8007689118385315,0.3914746642112732,-0.1601666510105133,0.11843488365411758,0.12832385301589966,-0.3147953748703003,-1.0858557224273682,-1.3881332874298096,0.41848018765449524,0.41012120246887207,-0.4426078498363495,-0.3383716344833374,-0.39345961809158325,-0.533682644367218,0.42450404167175293,-0.1787983477115631,-0.19907109439373016,0.141065314412117,-0.3510494530200958,0.0005878433585166931,0.5074073672294617,-0.20813387632369995,-0.16077902913093567,-0.34541139006614685,0.8675484657287598,-0.2572988271713257,0.6955578923225403,0.8147696852684021,-0.3188331723213196,-0.4609501361846924,0.08312800526618958,0.30135318636894226,-0.45179957151412964,0.208182692527771,0.07910577952861786,0.33806052803993225,-0.20045505464076996,0.028748780488967896,0.5296016335487366,-0.3387269079685211,-3.9181158542633057,0.25618356466293335,0.5118255019187927,0.08534808456897736,0.36700648069381714,-0.14927564561367035,-0.9174416065216064,-0.49974626302719116,-0.2435561716556549,-0.4437335729598999,-0.6672884821891785,0.38579699397087097,0.36329546570777893,-0.4231441915035248,0.004258936271071434,0.11074970662593842,0.5741931200027466,-0.4324412941932678,-0.14211063086986542,0.3892097473144531,-0.27428653836250305,0.31001096963882446,-0.654062032699585,0.3952302932739258,-0.3101281225681305,-0.5562043786048889,0.4172557592391968,0.5606774091720581,-0.38534078001976013,-0.2273891419172287,0.0538482666015625,0.3291379511356354,-0.12972202897071838,0.20758028328418732,0.042998056858778,-0.3564804196357727,0.5878847241401672,3.080852746963501,0.33749502897262573,-0.3929971158504486,0.7136695981025696,-0.5187445282936096,0.6916171312332153,-0.15432816743850708,0.2492455691099167,0.11655180156230927,0.16353680193424225,0.6069472432136536,0.15591426193714142,-0.3655056357383728,-0.43203940987586975,0.10145079344511032,-0.1451306939125061,0.8837816119194031,-0.7206571698188782,0.17449109256267548,0.2341129034757614,0.6586945652961731,0.236512690782547,0.10521383583545685,-0.18363788723945618,-0.09061803668737411,0.11524590849876404,0.16653850674629211,0.1434771865606308,0.3155686557292938,0.24742917716503143,0.16148734092712402,0.519766628742218,0.0581289641559124,-0.7555200457572937,0.27292653918266296,-0.056032195687294006,0.23581606149673462,0.9161329865455627,-1.0417929887771606,1.018524169921875,-0.9039424061775208,0.14049571752548218,-1.5358192920684814,0.7943843007087708,0.21312618255615234,0.33053508400917053,-0.057345516979694366,-0.968941330909729,0.3866513967514038,-0.41749781370162964,-0.44012346863746643,-0.5209500193595886,0.2766711115837097,-0.40549179911613464,-0.012633224949240685,0.4407968521118164,-0.013753573410212994,-0.8682495355606079,-0.2614334523677826,-0.4172724485397339,0.15250295400619507,-0.2320975959300995,-0.35343286395072937,0.6295621395111084,-0.419871985912323,-0.14418673515319824,-0.1463674157857895,0.18005940318107605,0.3235418498516083,0.20098823308944702,0.0012058205902576447,-0.15947744250297546,-0.2981697618961334,0.011782095767557621,1.190424919128418,0.24434742331504822,-0.010255623608827591,0.3451405465602875,-0.007360771298408508,0.7504293322563171,-0.2011173963546753,0.6153277158737183,0.5691820383071899,-0.6784759163856506,-0.3997258245944977,-0.33001816272735596,0.8090128302574158,0.3577059507369995,0.32541024684906006,1.3011770248413086,1.3093763589859009,-0.5252248644828796,0.761297345161438,-0.4841408133506775,-0.47567373514175415,0.21178925037384033,0.22537824511528015,0.5825928449630737,-0.020221710205078125,0.8549836277961731,0.1346234232187271,0.3852510452270508,0.14413340389728546,0.2224348485469818,0.06185188144445419,-0.09597110003232956,-0.7890567779541016,-0.4952475130558014,0.5777207016944885,-0.7309413552284241,-0.783406138420105,-0.06965053081512451,-0.7547388076782227,0.9009807109832764,0.5454696416854858,0.6009234189987183,0.4887757897377014,-0.16495469212532043,-0.06001992151141167,-0.1741875410079956,0.33542031049728394,0.050913918763399124,-0.38377735018730164,-0.6288641095161438,-0.3848554193973541,-0.8242539167404175,0.37334275245666504,0.08980158716440201,-0.10824265331029892,-0.24836352467536926,-0.3852197825908661,0.44524145126342773,1.6110196113586426,0.9746045470237732,1.0196607112884521,0.789705753326416,0.325560063123703,-0.27211713790893555,-0.1291421800851822,0.5295379161834717,-0.4486345946788788,-0.1386716365814209,-0.1877610683441162,0.04312777519226074,0.19653202593326569,0.43332237005233765,-0.8519160747528076,0.06862233579158783,-0.47727611660957336,0.04485213756561279,1.489140510559082,0.2685292363166809,-0.5390455722808838,0.40177643299102783,-0.06867159903049469,0.07415852695703506,0.18925005197525024,-1.6821637153625488,-0.3228605091571808,-0.6999279260635376,0.7996968626976013,-0.1514958143234253,-0.33394286036491394,0.6632052063941956,0.17774081230163574,-0.3735089600086212,-0.8456819653511047,-0.6234970688819885,-1.0165268182754517,-0.12703461945056915,-0.19004854559898376,-0.34936389327049255,1.063485860824585,-0.6924896240234375,-0.1209840252995491,0.1390393078327179,0.48384997248649597,0.7537667155265808,0.4351343512535095,-0.21872365474700928,-1.1315619945526123,0.5431106686592102,-0.4746042490005493,-0.11217755824327469,-0.09828445315361023,-0.5794588327407837,-0.2769397497177124,-0.5581794381141663,-0.30899396538734436,-0.12479128688573837,0.23790216445922852,-0.2728946805000305,-0.3548280894756317,-0.9990173578262329,0.5439509153366089,1.5307785272598267,0.373129665851593,-0.07448381185531616,0.6342233419418335,0.3766743838787079,-0.2318960726261139,0.029323630034923553,0.35649046301841736,0.20430196821689606,0.11578159779310226,-0.3941366374492645,-0.6225337386131287,0.09931296110153198,-0.6159058809280396,0.07246178388595581,0.2829784154891968,-0.7125835418701172,-0.5361393690109253,-0.3637850284576416,-0.15899710357189178,0.11327045410871506,-0.4295336604118347,0.6320022940635681,0.24479356408119202,-0.13227282464504242,-2.262115478515625,0.10489724576473236,1.0179729461669922,-0.1905125379562378,-0.17149829864501953,-0.20773158967494965,0.695410430431366,-0.5073713064193726,0.2955303192138672,-0.2801060676574707,1.4704424142837524,0.3992469310760498,-0.47248631715774536,-0.3324015140533447,0.3820326030254364,0.5437113046646118,-0.28543224930763245,0.041918981820344925,-0.11537504941225052,-0.27994877099990845,-0.08447282016277313,1.0415030717849731,1.4013524055480957,1.2572453022003174,0.6522542238235474,0.36616653203964233,0.3432820439338684,-0.6280796527862549,-1.1433331966400146,0.07676637172698975,-0.015281632542610168,-0.5273937582969666,0.5137706995010376,-0.4878983795642853,-0.3571256995201111,-0.34596681594848633,0.33533069491386414,-0.24154391884803772,-0.4702346622943878,0.05891495198011398,1.6955876350402832,0.08588133752346039,-0.16550029814243317,0.20416241884231567,-0.13624419271945953,-0.14691810309886932,-0.00772375613451004,0.22363163530826569,-0.272743821144104,0.03922071307897568,-0.6377389430999756,0.3053576946258545,-0.7075479030609131,-0.046131327748298645,-0.31568583846092224,0.4309992790222168,0.317438542842865,0.18257132172584534,0.9855051040649414,0.49575793743133545,-0.15402457118034363,0.3404470682144165,-0.16257616877555847,-0.3361798822879791,-0.14782284200191498]}},true]}]"###;
pub static WORKFLOWS_JSON: &str = r###"[{"type":"Workflow","content":[{"workflow":{"name":"Extensive_summary","version":"v0.1","steps":[{"name":"Initialize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$PROMPT","value":"Summarize this: "}},{"type":"registeroperation","value":{"register":"$EMBEDDINGS","value":{"name":"process_embeddings_in_job_scope","args":[]}}}]}]},{"name":"Summarize","body":[{"type":"registeroperation","value":{"register":"$RESULT","value":{"name":"multi_inference","args":[{"type":"register","value":"$PROMPT"},{"type":"register","value":"$EMBEDDINGS"}]}}}]}],"raw":"\n            workflow Extensive_summary v0.1 {\n                step Initialize {\n                    $PROMPT = \"Summarize this: \"\n                    $EMBEDDINGS = call process_embeddings_in_job_scope()\n                }\n                step Summarize {\n                    $RESULT = call multi_inference($PROMPT, $EMBEDDINGS)\n                }\n            } @@official.shinkai\n        ","description":"Reviews in depth all the content to generate a summary.","author":"@@official.shinkai","sticky":false},"embedding":{"id":"","vector":[0.6820248961448669,0.5723804831504822,0.056784410029649734,-0.029523666948080063,-0.2254689335823059,-0.053013481199741364,-0.6708416938781738,-0.2624345123767853,-0.033756330609321594,0.4013897180557251,-0.16321982443332672,0.971656858921051,0.2718249261379242,0.07108756899833679,0.2820807695388794,0.14116838574409485,-0.11496889591217041,-0.49301284551620483,-1.0789883136749268,-0.043452829122543335,0.19382520020008087,0.5948700308799744,0.6591302156448364,0.16274362802505493,-0.030279342085123062,-0.1913491189479828,-0.3163045048713684,-0.2898331880569458,-0.7694717645645142,-2.4501161575317383,0.5279894471168518,0.0053562745451927185,-0.5002804398536682,-0.5608552694320679,0.028381161391735077,-0.6834791302680969,0.328404039144516,0.2872193455696106,-0.27112722396850586,-0.2420305460691452,-0.20994114875793457,0.23660853505134583,-0.35357770323753357,0.590043306350708,0.27437782287597656,0.06486925482749939,-0.15818193554878235,-0.2542445659637451,0.3756386339664459,0.38245582580566406,-0.45134201645851135,-0.26646173000335693,-0.21188713610172272,0.5074135065078735,-0.45056354999542236,0.42795759439468384,-0.14764094352722168,-0.299643874168396,0.24885445833206177,0.021038610488176346,0.29774922132492065,0.527859091758728,-4.216637134552002,0.35374659299850464,0.19555260241031647,0.3751485049724579,0.17744454741477966,-0.2610761225223541,-0.172037273645401,0.032772570848464966,0.05567239597439766,0.19824181497097015,-0.13289085030555725,-0.1100323274731636,-0.23126265406608582,-0.34616896510124207,0.3950774073600769,0.35234352946281433,0.1308232843875885,-0.6239751577377319,-0.7391460537910461,0.4362350106239319,-0.0347885936498642,0.09445835649967194,-0.2117754966020584,0.7171225547790527,-0.3040316104888916,-0.3600367605686188,0.37041613459587097,-0.06581398844718933,-0.006318345665931702,-0.21981696784496307,-0.002286979928612709,0.2790469229221344,-0.7975400686264038,0.10219541937112808,0.15441451966762543,0.11658502370119095,0.4612636864185333,3.6136317253112793,0.6766623854637146,-0.28591224551200867,0.7045385241508484,-0.4960375726222992,0.1050494909286499,-0.5604535937309265,-0.25389742851257324,-0.2956107258796692,0.40285223722457886,-0.111656554043293,0.015156731009483337,-0.5351597666740417,-0.030287399888038635,0.3177969753742218,0.21704047918319702,0.7171976566314697,-0.46601396799087524,0.3439251184463501,-0.061566051095724106,0.20522497594356537,-0.6280752420425415,0.130172997713089,0.051850613206624985,0.21620029211044312,-0.2943073809146881,0.1809474229812622,-0.23445376753807068,0.2775576710700989,0.2914619445800781,0.0578656867146492,0.10241352021694183,-0.15168319642543793,-0.7568095326423645,0.092719167470932,-0.0777229368686676,-0.15893718600273132,0.5966013073921204,-0.7341698408126831,0.25946319103240967,-0.9252210259437561,0.09058776497840881,-1.5351767539978027,0.7115793824195862,0.29241278767585754,0.7798487544059753,-0.08018416166305542,-0.13354992866516113,-0.08928925544023514,-0.4238916337490082,-0.5697543025016785,0.06765686720609665,0.77348792552948,-0.04202955216169357,0.06487800180912018,0.5874587893486023,-0.11936471611261368,-0.25156763195991516,0.19140180945396423,-0.5563774108886719,0.31181517243385315,-0.32280847430229187,-0.15203385055065155,0.6281672716140747,0.6141714453697205,0.5077856183052063,-0.20541121065616608,0.334749698638916,-0.22992375493049622,0.3473362326622009,0.13209888339042664,-0.046164438128471375,-0.4251396954059601,0.33730384707450867,0.8212467432022095,0.177277609705925,-0.1610117256641388,-0.07467097789049149,0.2908981442451477,0.2191067337989807,-0.5679166316986084,0.7439255714416504,0.5261525511741638,-0.11653833091259003,-0.3659759759902954,-0.023860540241003036,-0.26393836736679077,0.42201778292655945,-0.21162325143814087,0.6553518176078796,0.7129044532775879,-0.8967499136924744,1.4437609910964966,-0.7139504551887512,-0.4562397301197052,0.1866864711046219,-0.1461351215839386,-0.5919792056083679,-0.022950291633605957,0.10381539165973663,0.28671005368232727,-0.5119964480400085,0.06818243861198425,-0.34842413663864136,-0.2360081672668457,-0.20727667212486267,-0.666267454624176,-0.2698496878147125,0.14760757982730865,-0.1733710914850235,-0.7490845322608948,0.17996001243591309,-0.1494026631116867,0.6294229030609131,0.6854228973388672,0.45075780153274536,0.16544346511363983,0.15525199472904205,0.40028688311576843,0.6559727787971497,0.5462879538536072,0.6049190759658813,-0.16969510912895203,-0.5258905291557312,-0.7370105385780334,-0.5058722496032715,0.05097363144159317,-0.4502354860305786,-0.16756923496723175,-0.3616001605987549,-0.07482671737670898,0.5364893674850464,0.3961637616157532,0.6380713582038879,0.7769057154655457,0.45226916670799255,0.12783251702785492,-0.06475261598825455,0.5124138593673706,0.2543259561061859,-0.3266713619232178,0.6652782559394836,-0.10381640493869781,-0.2858583927154541,0.369432270526886,0.4281133711338043,-0.397693008184433,-0.4147809147834778,-0.007397249341011047,-0.16696804761886597,1.8266067504882812,0.09511159360408783,-0.33791670203208923,0.20951442420482635,0.5353755950927734,0.4132263660430908,0.07172563672065735,-1.3672807216644287,0.033725690096616745,-0.6914818286895752,0.4152260720729828,-0.29042062163352966,0.2820392847061157,-0.12484639883041382,0.12444232404232025,-0.2538592219352722,-0.1376664787530899,-0.376803457736969,-0.21342863142490387,-0.3275066018104553,-0.1573990434408188,0.07955310493707657,0.7591940760612488,0.06325787305831909,-0.1243286207318306,-0.06205055117607117,0.27926522493362427,0.1881060153245926,-0.07187489420175552,-0.43998342752456665,-0.04985599219799042,0.35954052209854126,0.07155530899763107,0.37024304270744324,0.25004273653030396,-0.5525103211402893,-0.2558727264404297,-0.36321941018104553,0.04473167657852173,-0.09463290125131607,-0.01605386659502983,-0.21422991156578064,-0.40423282980918884,-0.07233521342277527,0.24171797931194305,1.5734977722167969,0.2532348036766052,0.3514263331890106,0.5783570408821106,0.38809657096862793,0.18779775500297546,-0.7362217903137207,0.018929127603769302,-0.2433643937110901,-0.1767692118883133,-0.6034640073776245,-0.2618042230606079,0.23901714384555817,0.25006982684135437,-0.3671899735927582,0.56818026304245,-0.45649564266204834,-0.5177562832832336,0.21355649828910828,0.04084805026650429,0.36265265941619873,-0.4912548065185547,0.3579895794391632,-0.06822404265403748,0.23526312410831451,-2.4479732513427734,-0.409572571516037,0.33847421407699585,0.39877307415008545,-0.31740933656692505,-0.13011762499809265,1.0355134010314941,-0.2030523419380188,0.004002278670668602,-0.17361848056316376,1.0097349882125854,0.3712850511074066,0.04738866910338402,-0.38382434844970703,-0.22995835542678833,0.10955353826284409,-0.5831428170204163,0.5505454540252686,-0.251912921667099,-0.6052247285842896,-0.11847558617591858,0.39012327790260315,1.722125768661499,0.4369223117828369,0.4068147540092468,-0.08888967335224152,0.16951988637447357,-0.7578551769256592,-1.5347665548324585,-0.09822624921798706,-0.1749330759048462,-0.40222880244255066,0.40935447812080383,-0.014797728508710861,-0.25942203402519226,0.7363397479057312,0.8023666143417358,0.1866847723722458,1.0114266872406006,-0.37116944789886475,1.44536292552948,-0.37696170806884766,-0.06581003218889236,0.011476762592792511,0.43547624349594116,0.33689627051353455,0.4570700526237488,-0.09152284264564514,-0.7278273105621338,-0.19184312224388123,-0.024527274072170258,0.5096248984336853,-0.4112659990787506,0.585030198097229,0.6007319092750549,0.13742738962173462,-0.0392843633890152,0.18517468869686127,0.4498704671859741,0.053321029990911484,0.055953219532966614,-0.3754947781562805,-0.2632603943347931,-0.8821566700935364,-0.5415434241294861]}},true]},{"type":"Workflow","content":[{"workflow":{"name":"Hyde_inference","version":"v0.1","steps":[{"name":"Initialize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$PROMPT","value":"write a passage to answer the question: "}},{"type":"registeroperation","value":{"register":"$HYDE_PROMPT","value":{"name":"concat","args":[{"type":"register","value":"$PROMPT"},{"type":"register","value":"$INPUT"}]}}},{"type":"registeroperation","value":{"register":"$HYDE_PASSAGE","value":{"name":"inference_no_ws","args":[{"type":"register","value":"$HYDE_PROMPT"}]}}},{"type":"registeroperation","value":{"register":"$HYDE_INPUT","value":{"name":"concat","args":[{"type":"register","value":"$INPUT"},{"type":"string","value":". "},{"type":"register","value":"$HYDE_PASSAGE"}]}}},{"type":"registeroperation","value":{"register":"$EMBEDDINGS","value":{"name":"search_embeddings_in_job_scope","args":[{"type":"register","value":"$HYDE_INPUT"}]}}}]}]},{"name":"Summarize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$CONNECTOR","value":"\\nLeverage the following information to answer the previous query: --- start ---"}},{"type":"registeroperation","value":{"register":"$NEW_INPUT","value":{"name":"concat","args":[{"type":"register","value":"$INPUT"},{"type":"register","value":"$CONNECTOR"},{"type":"register","value":"$EMBEDDINGS"}]}}},{"type":"registeroperation","value":{"register":"$RESULT","value":{"name":"inference","args":[{"type":"register","value":"$NEW_INPUT"}]}}}]}]}],"raw":"\n            workflow Hyde_inference v0.1 {\n                step Initialize {\n                    $PROMPT = \"write a passage to answer the question: \"\n                    $HYDE_PROMPT = call concat($PROMPT, $INPUT)\n                    $HYDE_PASSAGE = call inference_no_ws($HYDE_PROMPT)\n                    $HYDE_INPUT = call concat($INPUT, \". \", $HYDE_PASSAGE )\n                    $EMBEDDINGS = call search_embeddings_in_job_scope($HYDE_INPUT)\n                }\n                step Summarize {\n                    $CONNECTOR = \"\\nLeverage the following information to answer the previous query: --- start ---\"\n                    $NEW_INPUT = call concat($INPUT, $CONNECTOR, $EMBEDDINGS) \n                    $RESULT = call inference($NEW_INPUT)\n                }\n            } @@official.shinkai\n        ","description":"Generates a passage to answer a question and uses embeddings to refine the answer.","author":"@@official.shinkai","sticky":false},"embedding":{"id":"","vector":[-0.04964948445558548,0.07351528108119965,-0.0037448257207870483,-0.5989986658096313,-0.2695397734642029,0.0556429848074913,-0.8189688920974731,0.17371350526809692,-0.042529553174972534,-0.278947651386261,-0.1592383086681366,0.7632817625999451,-0.15512093901634216,0.5815573930740356,0.40833333134651184,0.08403884619474411,0.10889555513858795,-0.09859824180603027,-1.4305481910705566,-0.36282309889793396,0.26563403010368347,0.5795038938522339,0.6247695684432983,0.09672331809997559,0.2193397581577301,-0.3369952440261841,0.45206624269485474,-0.20352067053318024,-0.8568096160888672,-1.5192517042160034,0.45000338554382324,0.1857410967350006,-0.5474480986595154,-0.6226603984832764,-0.3259250521659851,-0.8049982786178589,0.41149431467056274,-0.33869048953056335,-0.40478962659835815,0.14186139404773712,0.08049512654542923,0.12524786591529846,0.05503413826227188,0.5369344353675842,0.22099512815475464,-0.22166168689727783,0.49372294545173645,0.14834408462047577,0.7515535950660706,0.23170407116413116,-0.38584038615226746,-0.6664334535598755,0.08026009798049927,0.05644957721233368,-0.47618070244789124,-0.07221367955207825,-0.013390932232141495,-0.7227036356925964,0.2766876816749573,-0.2050083577632904,0.0018085697665810585,0.36839884519577026,-4.047801494598389,0.25997495651245117,0.6095144748687744,0.29139724373817444,0.1967528611421585,0.33130836486816406,0.10284334421157837,0.6389473080635071,0.3290032148361206,0.469316303730011,-0.6486641764640808,0.9727193713188171,0.1883121132850647,-0.33047881722450256,-0.36619096994400024,0.22055767476558685,0.3932532072067261,-0.5142701864242554,-0.008600234985351562,0.1599426567554474,-0.09545424580574036,0.23433077335357666,-0.042303428053855896,0.7357178926467896,-0.32235464453697205,0.08163000643253326,0.14104235172271729,-0.11884527653455734,-0.03371256962418556,0.0557616725564003,0.3496687710285187,-0.03216787800192833,-0.003476671874523163,0.3798062205314636,0.03774901106953621,0.20039451122283936,-0.3984847366809845,3.36946439743042,-0.13239504396915436,0.001673419028520584,0.7380388379096985,-0.30677103996276855,0.9782622456550598,-0.19148962199687958,-0.3291283845901489,-0.27219173312187195,0.11630738526582718,-0.3731819987297058,0.2829224765300751,-0.5195115208625793,-0.707719087600708,0.13076543807983398,0.09487534314393997,0.3715026080608368,-0.21381931006908417,0.06631460785865784,0.1631127893924713,0.6596425771713257,-0.34905654191970825,0.4622417092323303,-0.2369920015335083,-0.4202103316783905,-0.5958117246627808,-0.0054769366979599,0.05269158259034157,0.3168359696865082,-0.42596322298049927,-0.2948320209980011,0.19625362753868103,0.3843995928764343,-0.7386986017227173,0.29027774930000305,0.38638198375701904,0.398516982793808,0.5393836498260498,-0.7760148644447327,0.026768285781145096,-0.6783398985862732,0.3489813208580017,-1.9833325147628784,0.42915868759155273,-0.3807029724121094,0.7297704219818115,-0.3749578893184662,-0.988932728767395,-0.049560628831386566,-0.748236894607544,-0.39161738753318787,-0.07422567903995514,0.7568775415420532,-0.42796590924263,-0.6895531415939331,0.7455142736434937,0.3727438449859619,-0.302215039730072,-0.2940479516983032,-0.39270395040512085,0.48044177889823914,-0.45199188590049744,0.012708820402622223,-0.014463722705841064,0.38177770376205444,0.41518479585647583,-0.26775816082954407,0.0609671026468277,0.259851336479187,0.5660082101821899,0.28002557158470154,0.2567088007926941,0.08408413827419281,-0.17901833355426788,0.6893192529678345,-0.18076415359973907,-0.1638849675655365,0.7592079639434814,-0.2850896716117859,0.09555481374263763,-0.34255003929138184,0.21607792377471924,0.6083880066871643,-0.27518394589424133,-0.2888985574245453,0.4869835376739502,0.24507123231887817,-0.04523368924856186,0.08955748379230499,0.8814894556999207,0.7514408826828003,-0.7933105826377869,1.4745051860809326,-0.8296284675598145,0.20127254724502563,-0.17663174867630005,0.10280756652355194,0.7590713500976562,0.6627715826034546,0.011114057153463364,-0.21741513907909393,-0.2958572506904602,-0.07200832664966583,-0.028994381427764893,-0.11766113340854645,-0.29194989800453186,-0.8990501165390015,0.22843225300312042,0.3628116250038147,-0.7341636419296265,-0.3731664717197418,-0.16071830689907074,-0.0289015993475914,0.7402246594429016,0.38305380940437317,0.8563412427902222,0.43994849920272827,0.30292415618896484,-0.22889143228530884,0.16537168622016907,0.7458362579345703,0.012104399502277374,-0.15416470170021057,-0.14556102454662323,-0.748606264591217,-0.5879684686660767,0.3174847364425659,-0.35950881242752075,-0.18004687130451202,-0.31736502051353455,-0.17857733368873596,0.23575669527053833,0.9159373044967651,0.2646183967590332,1.1622544527053833,0.6009469628334045,-0.020364172756671906,0.005769722163677216,0.3249523639678955,0.10982750356197357,-0.18247875571250916,-0.018897704780101776,-0.3283432722091675,0.06723657250404358,-0.18632438778877258,0.016186058521270752,-0.299119770526886,0.27416902780532837,-0.4262268543243408,-0.17139290273189545,1.6794452667236328,0.958503246307373,0.46273133158683777,0.3776611387729645,0.4485767185688019,0.4364531934261322,0.14672908186912537,-1.850408911705017,0.0067354487255215645,-0.7456330060958862,0.5802070498466492,0.3341884911060333,-0.7816597819328308,0.8321707248687744,-0.13638745248317719,-0.02185065858066082,-0.4651019871234894,-0.46033725142478943,-0.7211554050445557,-0.36014968156814575,-0.14086481928825378,-0.5944161415100098,0.8056583404541016,-0.7071620225906372,0.3785657584667206,-0.332245409488678,-0.09814120084047318,0.4233565926551819,0.015407413244247437,-0.33447521924972534,-0.4071231186389923,-0.067552350461483,-0.013831926509737968,0.16377918422222137,0.4718702435493469,-0.27083900570869446,-0.020545989274978638,-0.7419271469116211,-0.41673678159713745,-0.10136746615171432,0.2697226405143738,-0.28535905480384827,-0.3748951554298401,-0.7390844821929932,0.034545667469501495,1.644720435142517,-0.009804271161556244,-0.3737269937992096,0.5042737722396851,0.20176424086093903,-0.45157724618911743,-0.029246389865875244,-0.25737810134887695,-0.16420505940914154,0.39507946372032166,-0.6092503666877747,-0.547132134437561,0.49879688024520874,0.050793204456567764,-0.42933282256126404,-0.6348257064819336,-0.5210633873939514,-0.01414722204208374,0.241664320230484,0.07189908623695374,0.6878603100776672,-0.44729337096214294,0.6146893501281738,0.3114408254623413,0.09885749220848083,-2.39998459815979,0.22510097920894623,0.08821532130241394,0.02281942591071129,-0.16851471364498138,-0.39948421716690063,0.4781944751739502,-0.1106119155883789,0.37788909673690796,-0.5341840386390686,1.6657711267471313,0.23619230091571808,-0.16936853528022766,-0.34403157234191895,-0.05048051103949547,0.5156921148300171,-0.5097588300704956,-0.1076057031750679,0.16615211963653564,-0.41826316714286804,-0.09777717292308807,0.4317220151424408,1.4926064014434814,0.4437429904937744,0.6409068703651428,-0.2857368588447571,0.4252455234527588,-0.4507920742034912,-1.395687222480774,0.32343316078186035,-0.14300259947776794,0.17345699667930603,0.6882900595664978,-0.031068190932273865,-0.014234764501452446,0.2588723599910736,0.6380057334899902,-0.10916788876056671,0.21145275235176086,0.41304823756217957,1.875705361366272,0.30104920268058777,-0.14842073619365692,-0.4808446764945984,-0.3084228038787842,-0.2934291660785675,0.12193095684051514,0.18131327629089355,-0.632544219493866,0.30189579725265503,0.13330793380737305,0.1023193746805191,-0.14311614632606506,0.4220004975795746,0.20342287421226501,0.7711853981018066,0.04235168173909187,-0.061884328722953796,1.1321145296096802,-0.16180944442749023,0.008948512375354767,-0.0014485716819763184,-0.1739363670349121,-0.3506462275981903,-0.4292738437652588]}},true]},{"type":"Workflow","content":[{"workflow":{"name":"Answer_with_citations","version":"v0.1","steps":[{"name":"Initialize","body":[{"type":"composite","value":[{"type":"registeroperation","value":{"register":"$DSL","value":"\n        class Citation {\n            citation_id int\n            document_reference string @description(\\\"The name of the document and the page number that supports the answer e.g., FILENAME: Page [PAGE NUMBER]. This is a reference. You must mention it NO MATTER WHAT.\\\")\n            relevantTextFromDocument string @alias(\\\"relevantSentenceFromDocument\\\") @description(\\\"The relevant text from the document that supports the answer. This is part of the citation. You must quote it EXACTLY as it appears in the document with any special characters it contains. You may cite a part of the sentence. The text should be contiguous and not broken up. You may NOT summarize or skip sentences. If you need to skip a sentence, start a new citation instead.\\\")\n        }\n\n        class Answer {\n            answersInText Citation[] @alias(\\\"relevantSentencesFromText\\\")\n            answer AnswerWithCitations @description(\\\"An answer to the user's question that MUST cite sources from the relevantSentencesFromText. Like [0]. If multiple citations are needed, write them like [0][1][2].\\\")\n        }\n\n        class AnswerWithCitations {\n            brief_introduction Paragraph @description(\\\"3-4 long sentences. Must use the citations in the text.\\\")\n            extensive_body Paragraph[] @description(\\\"At least 3-6 long sentences. The more the better. Must use the citations in the text.\\\")\n            conclusion Paragraph[] @description(\\\"1-3 long sentences. Must use the citations in the text.\\\")\n        }\n\n        class Paragraph {\n            sentences string[]\n        }\n\n        class Document {\n            file string\n            text string\n            reference string\n        }\n        class Context {\n            documents Document[]\n            question string\n        }\n\n        function AnswerQuestion(context: Context) -> Answer {\n            client ShinkaiProvider\n\n            prompt #\\\"\n                Out of the given content, do your best to answer the question.\n\n                CONTEXT:\n                {% for document in context.documents %}\n                ----\n                DOCUMENT NAME: {{  document.file }}\n                PARTIAL TEXT: {{ document.text }}\n                DOCUMENT REFERENCE: {{ document.reference }}\n                ----\n                {% endfor %}\n                \n                {{ ctx.output_format }}\n\n                {{ _.role(\\\"user\\\") }}\n\n                QUESTION: {{ context.question }}. Citing the references no matter what e.g., [0]. If multiple citations are needed, write them like [0][1][2].\n\n                ANSWER:\n            \\\"#\n        }\n        "}},{"type":"registeroperation","value":{"register":"$PARAM","value":"context"}},{"type":"registeroperation","value":{"register":"$FUNCTION","value":"AnswerQuestion"}},{"type":"registeroperation","value":{"register":"$RESULT","value":{"name":"baml_inference","args":[{"type":"register","value":"$INPUT"},{"type":"string","value":""},{"type":"string","value":""},{"type":"register","value":"$DSL"},{"type":"register","value":"$FUNCTION"},{"type":"register","value":"$PARAM"}]}}}]}]}],"raw":"\n            workflow Answer_with_citations v0.1 {\n                step Initialize {\n                    $DSL = \"\n        class Citation {\n            citation_id int\n            document_reference string @description(\\\"The name of the document and the page number that supports the answer e.g., FILENAME: Page [PAGE NUMBER]. This is a reference. You must mention it NO MATTER WHAT.\\\")\n            relevantTextFromDocument string @alias(\\\"relevantSentenceFromDocument\\\") @description(\\\"The relevant text from the document that supports the answer. This is part of the citation. You must quote it EXACTLY as it appears in the document with any special characters it contains. You may cite a part of the sentence. The text should be contiguous and not broken up. You may NOT summarize or skip sentences. If you need to skip a sentence, start a new citation instead.\\\")\n        }\n\n        class Answer {\n            answersInText Citation[] @alias(\\\"relevantSentencesFromText\\\")\n            answer AnswerWithCitations @description(\\\"An answer to the user's question that MUST cite sources from the relevantSentencesFromText. Like [0]. If multiple citations are needed, write them like [0][1][2].\\\")\n        }\n\n        class AnswerWithCitations {\n            brief_introduction Paragraph @description(\\\"3-4 long sentences. Must use the citations in the text.\\\")\n            extensive_body Paragraph[] @description(\\\"At least 3-6 long sentences. The more the better. Must use the citations in the text.\\\")\n            conclusion Paragraph[] @description(\\\"1-3 long sentences. Must use the citations in the text.\\\")\n        }\n\n        class Paragraph {\n            sentences string[]\n        }\n\n        class Document {\n            file string\n            text string\n            reference string\n        }\n        class Context {\n            documents Document[]\n            question string\n        }\n\n        function AnswerQuestion(context: Context) -> Answer {\n            client ShinkaiProvider\n\n            prompt #\\\"\n                Out of the given content, do your best to answer the question.\n\n                CONTEXT:\n                {% for document in context.documents %}\n                ----\n                DOCUMENT NAME: {{  document.file }}\n                PARTIAL TEXT: {{ document.text }}\n                DOCUMENT REFERENCE: {{ document.reference }}\n                ----\n                {% endfor %}\n                \n                {{ ctx.output_format }}\n\n                {{ _.role(\\\"user\\\") }}\n\n                QUESTION: {{ context.question }}. Citing the references no matter what e.g., [0]. If multiple citations are needed, write them like [0][1][2].\n\n                ANSWER:\n            \\\"#\n        }\n        \"\n                    $PARAM = \"context\"\n                    $FUNCTION = \"AnswerQuestion\"\n                    $RESULT = call baml_inference($INPUT, \"\", \"\", $DSL, $FUNCTION, $PARAM)\n                }\n            } @@localhost.arb-sep-shinkai\n        ","description":"Generates an answer to a question with citations from the provided content using BAML. The answer includes quotes from the content as citations.","author":"@@localhost.arb-sep-shinkai","sticky":false},"embedding":{"id":"","vector":[0.3800816833972931,0.17640133202075958,-0.3163798451423645,-0.11634901911020279,-0.3349595069885254,-0.4466348886489868,-1.4688464403152466,0.259466290473938,-0.17714954912662506,-0.13371698558330536,-0.15901461243629456,0.43170809745788574,0.6013452410697937,-0.14516477286815643,0.6140050292015076,0.359850138425827,-0.038955509662628174,-0.4289429783821106,-0.960910439491272,0.12450194358825684,0.4667840301990509,0.3128971457481384,0.8007689118385315,0.3914746642112732,-0.1601666510105133,0.11843488365411758,0.12832385301589966,-0.3147953748703003,-1.0858557224273682,-1.3881332874298096,0.41848018765449524,0.41012120246887207,-0.4426078498363495,-0.3383716344833374,-0.39345961809158325,-0.533682644367218,0.42450404167175293,-0.1787983477115631,-0.19907109439373016,0.141065314412117,-0.3510494530200958,0.0005878433585166931,0.5074073672294617,-0.20813387632369995,-0.16077902913093567,-0.34541139006614685,0.8675484657287598,-0.2572988271713257,0.6955578923225403,0.8147696852684021,-0.3188331723213196,-0.4609501361846924,0.08312800526618958,0.30135318636894226,-0.45179957151412964,0.208182692527771,0.07910577952861786,0.33806052803993225,-0.20045505464076996,0.028748780488967896,0.5296016335487366,-0.3387269079685211,-3.9181158542633057,0.25618356466293335,0.5118255019187927,0.08534808456897736,0.36700648069381714,-0.14927564561367035,-0.9174416065216064,-0.49974626302719116,-0.2435561716556549,-0.4437335729598999,-0.6672884821891785,0.38579699397087097,0.36329546570777893,-0.4231441915035248,0.004258936271071434,0.11074970662593842,0.5741931200027466,-0.4324412941932678,-0.14211063086986542,0.3892097473144531,-0.27428653836250305,0.31001096963882446,-0.654062032699585,0.3952302932739258,-0.3101281225681305,-0.5562043786048889,0.4172557592391968,0.5606774091720581,-0.38534078001976013,-0.2273891419172287,0.0538482666015625,0.3291379511356354,-0.12972202897071838,0.20758028328418732,0.042998056858778,-0.3564804196357727,0.5878847241401672,3.080852746963501,0.33749502897262573,-0.3929971158504486,0.7136695981025696,-0.5187445282936096,0.6916171312332153,-0.15432816743850708,0.2492455691099167,0.11655180156230927,0.16353680193424225,0.6069472432136536,0.15591426193714142,-0.3655056357383728,-0.43203940987586975,0.10145079344511032,-0.1451306939125061,0.8837816119194031,-0.7206571698188782,0.17449109256267548,0.2341129034757614,0.6586945652961731,0.236512690782547,0.10521383583545685,-0.18363788723945618,-0.09061803668737411,0.11524590849876404,0.16653850674629211,0.1434771865606308,0.3155686557292938,0.24742917716503143,0.16148734092712402,0.519766628742218,0.0581289641559124,-0.7555200457572937,0.27292653918266296,-0.056032195687294006,0.23581606149673462,0.9161329865455627,-1.0417929887771606,1.018524169921875,-0.9039424061775208,0.14049571752548218,-1.5358192920684814,0.7943843007087708,0.21312618255615234,0.33053508400917053,-0.057345516979694366,-0.968941330909729,0.3866513967514038,-0.41749781370162964,-0.44012346863746643,-0.5209500193595886,0.2766711115837097,-0.40549179911613464,-0.012633224949240685,0.4407968521118164,-0.013753573410212994,-0.8682495355606079,-0.2614334523677826,-0.4172724485397339,0.15250295400619507,-0.2320975959300995,-0.35343286395072937,0.6295621395111084,-0.419871985912323,-0.14418673515319824,-0.1463674157857895,0.18005940318107605,0.3235418498516083,0.20098823308944702,0.0012058205902576447,-0.15947744250297546,-0.2981697618961334,0.011782095767557621,1.190424919128418,0.24434742331504822,-0.010255623608827591,0.3451405465602875,-0.007360771298408508,0.7504293322563171,-0.2011173963546753,0.6153277158737183,0.5691820383071899,-0.6784759163856506,-0.3997258245944977,-0.33001816272735596,0.8090128302574158,0.3577059507369995,0.32541024684906006,1.3011770248413086,1.3093763589859009,-0.5252248644828796,0.761297345161438,-0.4841408133506775,-0.47567373514175415,0.21178925037384033,0.22537824511528015,0.5825928449630737,-0.020221710205078125,0.8549836277961731,0.1346234232187271,0.3852510452270508,0.14413340389728546,0.2224348485469818,0.06185188144445419,-0.09597110003232956,-0.7890567779541016,-0.4952475130558014,0.5777207016944885,-0.7309413552284241,-0.783406138420105,-0.06965053081512451,-0.7547388076782227,0.9009807109832764,0.5454696416854858,0.6009234189987183,0.4887757897377014,-0.16495469212532043,-0.06001992151141167,-0.1741875410079956,0.33542031049728394,0.050913918763399124,-0.38377735018730164,-0.6288641095161438,-0.3848554193973541,-0.8242539167404175,0.37334275245666504,0.08980158716440201,-0.10824265331029892,-0.24836352467536926,-0.3852197825908661,0.44524145126342773,1.6110196113586426,0.9746045470237732,1.0196607112884521,0.789705753326416,0.325560063123703,-0.27211713790893555,-0.1291421800851822,0.5295379161834717,-0.4486345946788788,-0.1386716365814209,-0.1877610683441162,0.04312777519226074,0.19653202593326569,0.43332237005233765,-0.8519160747528076,0.06862233579158783,-0.47727611660957336,0.04485213756561279,1.489140510559082,0.2685292363166809,-0.5390455722808838,0.40177643299102783,-0.06867159903049469,0.07415852695703506,0.18925005197525024,-1.6821637153625488,-0.3228605091571808,-0.6999279260635376,0.7996968626976013,-0.1514958143234253,-0.33394286036491394,0.6632052063941956,0.17774081230163574,-0.3735089600086212,-0.8456819653511047,-0.6234970688819885,-1.0165268182754517,-0.12703461945056915,-0.19004854559898376,-0.34936389327049255,1.063485860824585,-0.6924896240234375,-0.1209840252995491,0.1390393078327179,0.48384997248649597,0.7537667155265808,0.4351343512535095,-0.21872365474700928,-1.1315619945526123,0.5431106686592102,-0.4746042490005493,-0.11217755824327469,-0.09828445315361023,-0.5794588327407837,-0.2769397497177124,-0.5581794381141663,-0.30899396538734436,-0.12479128688573837,0.23790216445922852,-0.2728946805000305,-0.3548280894756317,-0.9990173578262329,0.5439509153366089,1.5307785272598267,0.373129665851593,-0.07448381185531616,0.6342233419418335,0.3766743838787079,-0.2318960726261139,0.029323630034923553,0.35649046301841736,0.20430196821689606,0.11578159779310226,-0.3941366374492645,-0.6225337386131287,0.09931296110153198,-0.6159058809280396,0.07246178388595581,0.2829784154891968,-0.7125835418701172,-0.5361393690109253,-0.3637850284576416,-0.15899710357189178,0.11327045410871506,-0.4295336604118347,0.6320022940635681,0.24479356408119202,-0.13227282464504242,-2.262115478515625,0.10489724576473236,1.0179729461669922,-0.1905125379562378,-0.17149829864501953,-0.20773158967494965,0.695410430431366,-0.5073713064193726,0.2955303192138672,-0.2801060676574707,1.4704424142837524,0.3992469310760498,-0.47248631715774536,-0.3324015140533447,0.3820326030254364,0.5437113046646118,-0.28543224930763245,0.041918981820344925,-0.11537504941225052,-0.27994877099990845,-0.08447282016277313,1.0415030717849731,1.4013524055480957,1.2572453022003174,0.6522542238235474,0.36616653203964233,0.3432820439338684,-0.6280796527862549,-1.1433331966400146,0.07676637172698975,-0.015281632542610168,-0.5273937582969666,0.5137706995010376,-0.4878983795642853,-0.3571256995201111,-0.34596681594848633,0.33533069491386414,-0.24154391884803772,-0.4702346622943878,0.05891495198011398,1.6955876350402832,0.08588133752346039,-0.16550029814243317,0.20416241884231567,-0.13624419271945953,-0.14691810309886932,-0.00772375613451004,0.22363163530826569,-0.272743821144104,0.03922071307897568,-0.6377389430999756,0.3053576946258545,-0.7075479030609131,-0.046131327748298645,-0.31568583846092224,0.4309992790222168,0.317438542842865,0.18257132172584534,0.9855051040649414,0.49575793743133545,-0.15402457118034363,0.3404470682144165,-0.16257616877555847,-0.3361798822879791,-0.14782284200191498]}},true]}]"###;
